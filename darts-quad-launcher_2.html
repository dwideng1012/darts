<!DOCTYPE html>
<html lang="et">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Darts – 4 lauda (auto-fit, ilma nuppudeta)</title>
<style>
  html,body{height:100%;margin:0;background:#000}
  .grid{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;height:100vh;width:100vw}
  .cell{position:relative;overflow:hidden;background:#000;box-shadow:inset 0 0 0 1px #111;cursor:grab}
  .cell:active{cursor:grabbing}
  iframe{position:absolute;top:0;left:0;width:100vw;height:100vh;border:0;transform-origin:top left;pointer-events:none}
  .badge{position:absolute;right:.5rem;top:.5rem;z-index:3;color:#bbb;background:rgba(0,0,0,.55);font:12px system-ui;padding:.2rem .4rem;border-radius:.35rem}
  .hint{position:fixed;right:.5rem;bottom:.5rem;color:#aaa;font:12px system-ui;background:rgba(0,0,0,.55);padding:.3rem .5rem;border-radius:.35rem;user-select:none}
</style>
</head>
<body>
  <div class="grid">
    <div class="cell" data-url="https://tv.dartconnect.com/live/7641/M/ixeestimeestriv25"><span class="badge">7641</span><iframe sandbox="allow-scripts allow-same-origin allow-forms" referrerpolicy="no-referrer"></iframe></div>
    <div class="cell" data-url="https://tv.dartconnect.com/live/4794/M/ixeestimeestriv25"><span class="badge">4794</span><iframe sandbox="allow-scripts allow-same-origin allow-forms" referrerpolicy="no-referrer"></iframe></div>
    <div class="cell" data-url="https://tv.dartconnect.com/live/2388/M/ixeestimeestriv25"><span class="badge">2388</span><iframe sandbox="allow-scripts allow-same-origin allow-forms" referrerpolicy="no-referrer"></iframe></div>
    <div class="cell" data-url="https://tv.dartconnect.com/live/3307/M/ixeestimeestriv25"><span class="badge">3307</span><iframe sandbox="allow-scripts allow-same-origin allow-forms" referrerpolicy="no-referrer"></iframe></div>
  </div>

  <div class="hint">Lohista | Suurenda: hiireratas | Topeltklõps: Fit | F: täisekraan</div>

<script>
(function(){
  const VW = ()=>window.innerWidth;   // iframe “originaal” mõõt (100vw/100vh)
  const VH = ()=>window.innerHeight;

  document.querySelectorAll('.cell').forEach(cell=>{
    const iframe = cell.querySelector('iframe');
    iframe.src = cell.dataset.url;

    // paneeli seis
    const st = cell._st = { x:0, y:0, s:1, mode:"fit" }; // mode: "fit" | "free"
    const apply = ()=>{ iframe.style.transform = `translate(${st.x}px,${st.y}px) scale(${st.s})`; };

    // FIT: kogu tabloo nähtavale
    const fit = ()=>{
      const r = cell.getBoundingClientRect();
      st.s = Math.min(r.width / VW(), r.height / VH());
      st.x = 0; st.y = 0; st.mode = "fit"; apply();
    };

    // esmane paigutus
    fit();

    // lohistus → free-režiim
    let drag=false,sx=0,sy=0,ox=0,oy=0;
    cell.addEventListener('pointerdown',e=>{drag=true;sx=e.clientX;sy=e.clientY;ox=st.x;oy=st.y;cell.setPointerCapture(e.pointerId)});
    cell.addEventListener('pointermove',e=>{if(!drag)return; st.x=ox+(e.clientX-sx); st.y=oy+(e.clientY-sy); st.mode="free"; apply();});
    cell.addEventListener('pointerup',()=>drag=false);

    // hiireratta zoom → free-režiim (kursori keskpunkti ümber)
    cell.addEventListener('wheel',e=>{
      e.preventDefault();
      const k=Math.exp(-e.deltaY*0.0015);
      const r=cell.getBoundingClientRect(),cx=e.clientX-r.left,cy=e.clientY-r.top;
      const px=(cx-st.x)/st.s, py=(cy-st.y)/st.s;
      st.s=Math.max(.4,Math.min(4,st.s*k));
      st.x=cx-px*st.s; st.y=cy-py*st.s; st.mode="free"; apply();
    }, {passive:false});

    // topeltklõps → tagasi FIT
    cell.addEventListener('dblclick', fit);

    // akna suuruse muutus: uuesti FIT ainult siis, kui pole free-režiimis
    window.addEventListener('resize', ()=>{ if(st.mode==="fit") fit(); });
  });

  // Täisekraan (F)
  document.addEventListener('keydown',(e)=>{
    if(e.key.toLowerCase()==='f'){
      const el=document.documentElement;
      if(!document.fullscreenElement){ (el.requestFullscreen||el.webkitRequestFullscreen||el.msRequestFullscreen)?.call(el); }
      else { document.exitFullscreen?.(); }
    }
  });
})();
</script>
</body>
</html>












